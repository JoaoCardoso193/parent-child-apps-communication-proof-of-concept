{"metadata":{},"options":{"assumptions":{},"compact":false,"sourceMaps":true,"ast":true,"babelrc":false,"configFile":false,"parserOpts":{"sourceType":"module","sourceFileName":"/Users/joaocardoso193/Desktop/Actual Food/cross-domain-communication-proof-of-concept/meteor-svelte/svelte-parent-app/packages/rdb:svelte-meteor-data/subscribe.js","plugins":["*","flow","jsx","asyncGenerators","bigInt","classPrivateMethods","classPrivateProperties","classProperties","doExpressions","dynamicImport","exportDefaultFrom","exportExtensions","exportNamespaceFrom","functionBind","functionSent","importMeta","nullishCoalescingOperator","numericSeparator","objectRestSpread","optionalCatchBinding","optionalChaining",["pipelineOperator",{"proposal":"minimal"}],"throwExpressions","classProperties","classPrivateProperties","jsx","nullishCoalescingOperator","nullishCoalescingOperator","optionalChaining","optionalCatchBinding","optionalCatchBinding","classProperties","classPrivateProperties","classPrivateMethods","classProperties","classPrivateProperties","asyncGenerators","asyncGenerators","objectRestSpread","objectRestSpread","logicalAssignment"],"allowImportExportEverywhere":true,"allowReturnOutsideFunction":true,"allowUndeclaredExports":true,"strictMode":false},"caller":{"name":"meteor","arch":"web.browser.legacy"},"sourceFileName":"packages/rdb:svelte-meteor-data/subscribe.js","filename":"/Users/joaocardoso193/Desktop/Actual Food/cross-domain-communication-proof-of-concept/meteor-svelte/svelte-parent-app/packages/rdb:svelte-meteor-data/subscribe.js","targets":{},"cloneInputAst":true,"browserslistConfigFile":false,"passPerPreset":false,"envName":"development","cwd":"/Users/joaocardoso193/Desktop/Actual Food/cross-domain-communication-proof-of-concept/meteor-svelte/svelte-parent-app","root":"/Users/joaocardoso193/Desktop/Actual Food/cross-domain-communication-proof-of-concept/meteor-svelte/svelte-parent-app","rootMode":"root","plugins":[{"key":"base$0","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$0","visitor":{"Program":{"enter":[null],"exit":[null]},"_exploded":true,"_verified":true},"options":{"avoidModernSyntax":true,"enforceStrictMode":false,"dynamicImport":true}},{"key":"transform-runtime","visitor":{"MemberExpression":{"enter":[null]},"ObjectPattern":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":{},"_verified":{},"Identifier":{"enter":[null]},"JSXIdentifier":{"enter":[null]}},"options":{"version":"7.15.3","helpers":true,"useESModules":false,"corejs":false}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{"loose":true}},{"key":"base$0$3","visitor":{"FunctionExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"base$0$4","visitor":{"ForInStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-jsx","visitor":{"_exploded":{},"_verified":{},"JSXNamespacedName":{"enter":[null]},"JSXSpreadChild":{"enter":[null]},"Program":{"enter":[null]},"JSXElement":{"exit":[null]},"JSXFragment":{"exit":[null]},"JSXAttribute":{"enter":[null]}},"options":{"pragma":"React.createElement","pragmaFrag":"React.Fragment","runtime":"classic","throwIfNamespace":true,"useBuiltIns":false}},{"key":"transform-react-display-name","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-react-pure-annotations","visitor":{"CallExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"syntax-nullish-coalescing-operator","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-nullish-coalescing-operator","visitor":{"_exploded":{},"_verified":{},"LogicalExpression":{"enter":[null]}},"options":{}},{"key":"syntax-optional-chaining","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-chaining","visitor":{"_exploded":true,"OptionalCallExpression":{"enter":[null]},"OptionalMemberExpression":{"enter":[null]},"_verified":true},"options":{}},{"key":"syntax-optional-catch-binding","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-optional-catch-binding","visitor":{"_exploded":{},"_verified":{},"CatchClause":{"enter":[null]}},"options":{}},{"key":"syntax-class-properties","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-class-properties","visitor":{"PrivateName":{"enter":[null]},"ExportDefaultDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]}},"options":{}},{"key":"syntax-async-generators","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-async-generator-functions","visitor":{"_exploded":{},"_verified":{},"Program":{"enter":[null]}},"options":{}},{"key":"syntax-object-rest-spread","visitor":{"_exploded":true,"_verified":true},"options":{}},{"key":"proposal-object-rest-spread","visitor":{"_exploded":{},"_verified":{},"VariableDeclarator":{"enter":[null]},"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectExpression":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"proposal-logical-assignment-operators","visitor":{"_exploded":{},"_verified":{},"AssignmentExpression":{"enter":[null]}},"options":{}},{"key":"transform-arrow-functions","visitor":{"ArrowFunctionExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoped-functions","visitor":{"BlockStatement":{"enter":[null]},"SwitchCase":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-block-scoping","visitor":{"VariableDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"_exploded":true,"BlockStatement":{"enter":[null]},"SwitchStatement":{"enter":[null]},"Program":{"enter":[null]},"_verified":true,"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-classes","visitor":{"ExportDefaultDeclaration":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ClassExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-computed-properties","visitor":{"ObjectExpression":{"exit":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-destructuring","visitor":{"ExportNamedDeclaration":{"enter":[null]},"CatchClause":{"enter":[null]},"AssignmentExpression":{"enter":[null]},"VariableDeclaration":{"enter":[null]},"_exploded":true,"_verified":true,"ForInStatement":{"enter":[null]},"ForOfStatement":{"enter":[null]}},"options":{}},{"key":"transform-for-of","visitor":{"ForOfStatement":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-literals","visitor":{"NumericLiteral":{"enter":[null]},"StringLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-object-super","visitor":{"ObjectExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-parameters","visitor":{"_exploded":true,"_verified":true,"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"ObjectMethod":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]}},"options":{}},{"key":"transform-shorthand-properties","visitor":{"ObjectMethod":{"enter":[null]},"ObjectProperty":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-spread","visitor":{"ArrayExpression":{"enter":[null]},"CallExpression":{"enter":[null]},"NewExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-sticky-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-template-literals","visitor":{"TaggedTemplateExpression":{"enter":[null]},"TemplateLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{"loose":true}},{"key":"transform-typeof-symbol","visitor":{"UnaryExpression":{"enter":[null]},"_exploded":true,"_verified":true,"BlockStatement":{"enter":[null]},"CatchClause":{"enter":[null]},"DoWhileStatement":{"enter":[null]},"ForInStatement":{"enter":[null]},"ForStatement":{"enter":[null]},"FunctionDeclaration":{"enter":[null]},"FunctionExpression":{"enter":[null]},"Program":{"enter":[null]},"ObjectMethod":{"enter":[null]},"SwitchStatement":{"enter":[null]},"WhileStatement":{"enter":[null]},"ArrowFunctionExpression":{"enter":[null]},"ClassExpression":{"enter":[null]},"ClassDeclaration":{"enter":[null]},"ForOfStatement":{"enter":[null]},"ClassMethod":{"enter":[null]},"ClassPrivateMethod":{"enter":[null]},"StaticBlock":{"enter":[null]},"TSModuleBlock":{"enter":[null]},"AssignmentPattern":{"enter":[null]},"ArrayPattern":{"enter":[null]},"ObjectPattern":{"enter":[null]}},"options":{}},{"key":"transform-unicode-regex","visitor":{"RegExpLiteral":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-property-literals","visitor":{"ObjectProperty":{"exit":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"transform-exponentiation-operator","visitor":{"AssignmentExpression":{"enter":[null]},"BinaryExpression":{"enter":[null]},"_exploded":true,"_verified":true},"options":{}},{"key":"regenerator-transform","visitor":{"_exploded":true,"_verified":true,"ObjectMethod":{"enter":[null],"exit":[null]},"ClassMethod":{"enter":[null],"exit":[null]},"ClassPrivateMethod":{"enter":[null],"exit":[null]},"FunctionDeclaration":{"exit":[null]},"FunctionExpression":{"exit":[null]},"ArrowFunctionExpression":{"exit":[null]}},"options":{}}],"presets":[],"generatorOpts":{"filename":"/Users/joaocardoso193/Desktop/Actual Food/cross-domain-communication-proof-of-concept/meteor-svelte/svelte-parent-app/packages/rdb:svelte-meteor-data/subscribe.js","comments":true,"compact":false,"sourceMaps":true,"sourceFileName":"packages/rdb:svelte-meteor-data/subscribe.js"}},"code":"var current_component;\nmodule.link(\"svelte/internal\", {\n  current_component: function (v) {\n    current_component = v;\n  }\n}, 0);\n_subscribe = Meteor.subscribe;\n\nMeteor.subscribe = function () {\n  function subscribe(name) {\n    var params = Array.from(arguments);\n    var callbacks = Object.create(null);\n\n    if (params.length > 1) {\n      // Preserve existing callbacks.\n      var last = params[params.length - 1];\n\n      if (last) {\n        // Last arg may be specified as a function, or as an object\n        if (typeof last === 'function') {\n          callbacks.onReady = params.pop();\n        } else if ([last.onReady, last.onError, last.onStop].some(function (f) {\n          return typeof f === \"function\";\n        })) {\n          callbacks = params.pop();\n        }\n      }\n    }\n\n    params.push(callbacks);\n    var subscription; // Collect callbacks to call when subscription is ready or has errored.\n\n    var readyCallbacks = [];\n    var errorCallbacks = [];\n\n    if (callbacks.onReady) {\n      readyCallbacks.push(callbacks.onReady);\n    }\n\n    if (callbacks.onError) {\n      errorCallbacks.push(callbacks.onError);\n    }\n\n    callbacks.onReady = function () {\n      readyCallbacks.forEach(function (fn) {\n        return fn(subscription);\n      });\n      readyCallbacks.length = 0;\n    };\n\n    callbacks.onError = function (err) {\n      errorCallbacks.forEach(function (fn) {\n        return fn(err);\n      });\n      errorCallbacks.length = 0;\n    };\n\n    subscription = _subscribe.apply(this, params);\n\n    if (current_component) {\n      current_component.$$.on_destroy.push(subscription.stop.bind(subscription));\n    }\n\n    subscription.then = function (fn, err) {\n      if (subscription.ready()) {\n        fn();\n      } else {\n        readyCallbacks.push(fn);\n        err && errorCallbacks.push(err);\n      }\n    };\n\n    return subscription;\n  }\n\n  return subscribe;\n}();","map":{"version":3,"sources":["packages/rdb:svelte-meteor-data/subscribe.js"],"names":["current_component","module","link","v","_subscribe","Meteor","subscribe","name","params","Array","from","arguments","callbacks","Object","create","length","last","onReady","pop","onError","onStop","some","f","push","subscription","readyCallbacks","errorCallbacks","forEach","fn","err","apply","$$","on_destroy","stop","bind","then","ready"],"mappings":"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","sourcesContent":["/**\n * Overrides Meteor.subscribe to do the following things:\n * - Automatically stops the subscription when the component is destroyed\n * - Makes the return value usable in {#await} blocks\n */\n\nimport { current_component } from 'svelte/internal';\n\n\n_subscribe = Meteor.subscribe;\nMeteor.subscribe = function subscribe(name) {\n  const params = Array.from(arguments);\n  let callbacks = Object.create(null);\n  if (params.length > 1) {\n    // Preserve existing callbacks.\n    const last = params[params.length - 1];\n    if (last) {\n      // Last arg may be specified as a function, or as an object\n      if (typeof last === 'function') {\n        callbacks.onReady = params.pop();\n      } else if ([last.onReady, last.onError, last.onStop].some(f => typeof f === \"function\")) {\n        callbacks = params.pop();\n      }\n    }\n  }\n  params.push(callbacks);\n\n  let subscription;\n\n  // Collect callbacks to call when subscription is ready or has errored.\n  let readyCallbacks = [];\n  let errorCallbacks = [];\n  if (callbacks.onReady) {\n    readyCallbacks.push(callbacks.onReady);\n  }\n  if (callbacks.onError) {\n    errorCallbacks.push(callbacks.onError);\n  }\n  callbacks.onReady = () => {\n    readyCallbacks.forEach(fn => fn(subscription));\n    readyCallbacks.length = 0;\n  };\n  callbacks.onError = (err) => {\n    errorCallbacks.forEach(fn => fn(err));\n    errorCallbacks.length = 0;\n  };\n\n  subscription = _subscribe.apply(this, params);\n  if (current_component) {\n    current_component.$$.on_destroy.push(subscription.stop.bind(subscription));\n  }\n  subscription.then = (fn, err) => {\n    if (subscription.ready()) {\n      fn();\n    } else {\n      readyCallbacks.push(fn);\n      err && errorCallbacks.push(err);\n    }\n  };\n  return subscription;\n};\n"]},"sourceType":"module","hash":"eaba1bef9d74909c25cfada6799f0e193eb0020b"}
